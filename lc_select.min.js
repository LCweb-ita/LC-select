/**
 * lc_select.js - Superlight Javascript dropdowns
 * Version: 1.1.7
 * Author: Luca Montanari (LCweb)
 * Website: https://lcweb.it
 * Licensed under the MIT license
 */
!function(){"use strict";if(void 0!==window.lc_select)return!1;let e=[],t=!1,l=null,s=null,i={enable_search:!0,min_for_search:7,autofocus_search:!1,wrap_width:"auto",addit_classes:[],pre_placeh_opt:!1,max_opts:!1,on_change:null,labels:["search options","add options","Select options ..",".. no matching options ..",]};document.addEventListener("click",function(e){let t=document.querySelector("#lc-select-dd.lcslt-shown");if(!t)return!0;for(let l of document.getElementsByClassName("lcslt-wrap"))if(l.contains(e.target))return!0;return t.contains(e.target)||e.target.classList.contains("lcslt-shown")||(t.remove(),s&&(s.classList.remove("lcslt_dd-open"),s=null)),!0}),window.addEventListener("resize",function(e){let t=document.querySelector("#lc-select-dd.lcslt-shown");return!!(!t||document.activeElement.hasAttribute("type")&&"text"===document.activeElement.getAttribute("type"))||(t.classList.remove("lcslt-shown"),s.classList.remove("lcslt_dd-open"),s=null,!0)}),window.addEventListener("scroll",e=>{document.querySelector(".lc-select-dd-scroll")&&t&&window.scrollTo(t[0],t[1])}),document.addEventListener("keydown",e=>{if(-1===[38,40,13,27,9].indexOf(e.keyCode)||!document.querySelector("#lc-select-dd.lcslt-shown"))return!0;e.preventDefault();let t=document.querySelector(".lcslt-dd-opt.lcslt-dd-opt-hlight"),l=document.querySelectorAll(".lcslt-dd-opt:not(.lcslt-disabled)"),i=new Event("mouseenter",{bubbles:!0});switch(e.keyCode){case 27:s.click();break;case 9:document.activeElement.classList&&document.activeElement.classList.contains("lcslt-tabindex-trick")||s.click();break;case 13:t&&(t.classList.remove("lcslt-dd-opt-hlight"),t.click());break;case 38:case 40:let a=38==e.keyCode?0:l.length-1;t&&l.forEach((e,l)=>{e==t&&(a=l)});let n;l[n=38==e.keyCode?a?a-1:l.length-1:a==l.length-1?0:a+1].dispatchEvent(i),c()}return!0});let c=()=>{let e=document.querySelector(".lcslt-dd-opt-hlight");if(!e)return!1;let t=parseInt(getComputedStyle(e).borderTopWidth,10);document.querySelector(".lc-select-dd-scroll").scrollTop=e.offsetTop-(e.offsetHeight+t)*2-10};window.lc_select=function(r,o={}){return r?"object"!=typeof o?console.error("Options must be an object"):void(o=Object.assign({},i,o),this.init=function(){let e=this;l||(this.generate_style(),l=!0),a(r).forEach(function(t){!("SELECT"!=t.tagName||t.parentNode.classList.length&&t.parentNode.classList.contains("lcslt-wrap"))&&(e.wrap_element(t),t.removeEventListener("lc-select-refresh",()=>{}),t.addEventListener("lc-select-refresh",t=>{s&&s.click();let l=t.target.parentNode.querySelector(".lcslt");return e.set_sel_content(l),!!(t.target.parentNode.classList.length&&(!t.target.parentNode.classList.length||t.target.parentNode.classList.contains("lcslt-wrap")))&&(t.target.disabled?l.classList.add("lcslt-disabled"):l.classList.remove("lcslt-disabled"),!0)}),t.removeEventListener("lc-select-destroy",()=>{}),t.addEventListener("lc-select-destroy",e=>{s&&s.click();let t=e.target,l=e.target.parentNode,i=t.querySelector('option[data-lcslt-placeh="1"]');return!!(l.classList.length&&(!l.classList.length||l.classList.contains("lcslt-wrap")))&&(i&&i.remove(),l.parentNode.insertBefore(t,l),l.remove(),!0)}))})},this.wrap_element=function(e){let t=this,l=document.createElement("div"),s="lcslt-f-"+e.getAttribute("name").replace(/\[\]/g,""),i=e.disabled?"lcslt-disabled":"",c=e.multiple?"lcslt-multiple":"",a=e.getAttribute("tabindex")?parseInt(e.getAttribute("tabindex"),10):"",n=e.hasAttribute("data-placeholder")?e.getAttribute("data-placeholder").trim():"";!n&&c&&(n=o.labels[2]),n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),"object"==typeof o.addit_classes&&o.addit_classes.some(e=>{l.classList.add(e)}),"auto"!=o.wrap_width&&(l.style.width="inherit"==o.wrap_width?Math.round(e.getBoundingClientRect().width)+"px":o.wrap_width),l.classList.add("lcslt-wrap",s),l.innerHTML='<input type="text" name="'+s+'-tit" tabindex="'+a+'" class="lcslt-tabindex-trick" /><div class="lcslt '+s+" "+c+" "+i+'" data-placeh="'+n+'"></div>',e.parentNode.insertBefore(l,e),l.appendChild(e);let r=l.querySelector(".lcslt");if(o.pre_placeh_opt&&!c&&n){let d=!0;if(e.querySelectorAll("option").forEach(e=>{if(e.hasAttribute("selected"))return d=!1,!1}),d){let p=document.createElement("option");p.setAttribute("data-lcslt-placeh",1),p.setAttribute("value",""),p.style.display="none",p.innerHTML=n,p.selected=!0,e.insertBefore(p,e.firstChild)}}this.set_sel_content(r),r.addEventListener("click",e=>{r.classList.contains("lcslt-disabled")||e.target.classList.contains("lcslt-multi-selected")||e.target.classList.contains("lcslt-max-opts")||e.target.parentNode.classList.contains("lcslt-multi-selected")||t.show_dd(r)}),l.querySelector(".lcslt-tabindex-trick").onfocus=e=>{r.click()}},this.set_sel_content=function(e=!1){e||(e=s);let t=this,l=e.nextSibling,i=e.classList.contains("lcslt-multiple"),c="",a=0,r=0;l.querySelectorAll("option").forEach(e=>{if(e.selected){let t=e.hasAttribute("data-image-class")?'<i class="'+e.getAttribute("data-image-class").trim()+'"></i>':"";if(e.hasAttribute("data-image")&&(t='<i class="lcslt-img" style="background-image: url(\''+e.getAttribute("data-image").trim()+"')\"></i>"),i)c+='<div class="lcslt-multi-selected" data-val="'+e.getAttribute("value")+'" title="'+e.innerHTML+'"><span>'+t+e.innerHTML+"</span></div>";else{let l=o.pre_placeh_opt&&e.hasAttribute("data-lcslt-placeh")?'class="lcslt-placeholder"':"";c="<span "+l+' title="'+e.innerHTML+'">'+t+e.innerHTML+"</span>"}r++}a++});let d=!1;"number"==typeof o.max_opts&&o.max_opts>1&&(r>=o.max_opts?(e.classList.add("lcslt-max-opts"),d=!0):e.classList.remove("lcslt-max-opts")),c?i&&a>r&&!l.disabled&&!d&&(c+='<span class="lcslt-multi-callout" title="'+o.labels[1]+'">+</span>'):c='<span class="lcslt-placeholder">'+e.getAttribute("data-placeh")+"</span>",e.innerHTML=c,i&&e.querySelectorAll(".lcslt-multi-selected").forEach(l=>{l.addEventListener("click",s=>{n(s.target,".lcslt").classList.contains("lcslt-disabled")||t.deselect_option(s,e,l)})})},this.show_dd=function(e){if(document.querySelector("#lc-select-dd")&&(document.querySelector("#lc-select-dd").remove(),s&&s.classList.remove("lcslt_dd-open")),e==s)return s=null,!1;s=e,this.append_dd(),this.set_dd_position(),c();let t=this,l=document.querySelector("#lc-select-dd");l.classList.add("lcslt-shown"),e.classList.add("lcslt_dd-open"),setTimeout(()=>{e.getBoundingClientRect().x!=l.getBoundingClientRect().x&&t.set_dd_position()},10)},this.set_dd_position=function(){let e=document.querySelector("#lc-select-dd"),t=s.getBoundingClientRect(),l=t.width.toFixed(2),i=parseInt(s.clientHeight,10)+parseInt(getComputedStyle(s).borderTopWidth,10),c=parseInt(t.y,10)+parseInt(window.pageYOffset,10)+i,a=t.left.toFixed(2);a<0&&(a=0),e.setAttribute("style","width:"+l+"px; top:"+c+"px; left: "+a+"px;")},this.append_dd=function(){let e=this,l=s.parentNode.querySelector("select"),i=new Map,c=!1,a=[];l.querySelectorAll("optgroup").length?l.querySelectorAll("optgroup").forEach(e=>{i.set(e.getAttribute("label"),new Map),e.disabled&&a.push(e.getAttribute("label"))}):(c=!0,i.set("%%lcslt%%",new Map)),l.querySelectorAll("option").forEach(e=>{let t={img:e.hasAttribute("data-image")?e.getAttribute("data-image").trim():"",imgClass:e.hasAttribute("data-image-class")?e.getAttribute("data-image-class").trim():"",name:e.innerHTML,selected:e.selected,disabled:e.disabled},l=c?"%%lcslt%%":e.parentNode.getAttribute("label");(c||l)&&i.get(l).set(e.getAttribute("value"),t)});let n=s.classList.contains("lcslt-multiple")?"lcslt-multiple-dd":"",r="object"==typeof o.addit_classes?o.addit_classes.join(" "):"",d='<div id="lc-select-dd" class="'+n+" "+r+'">',p=!!(o.enable_search&&l.querySelectorAll("option").length>=parseInt(o.min_for_search,10));p&&(d+='<ul><li class="lcslt-search-li"><input type="text" name="lcslt-search" value="" placeholder="'+o.labels[0]+'" autocomplete="off" /></li></ul>'),d+='<ul class="lc-select-dd-scroll">',i.forEach((e,t)=>{if(!c){let s=-1!==a.indexOf(e)?"lcslt-disabled":"",r=l.querySelector('optgroup[label="'+t+'"]'),o=r.hasAttribute("data-image-class")?'<i class="'+r.getAttribute("data-image-class").trim()+'"></i>':"";r.hasAttribute("data-image")&&(o='<i class="lcslt-img" style="background-image: url(\''+r.getAttribute("data-image").trim()+"')\"></i>"),d+='<li class="lcslt-group '+s+'"><span class="lcslt-group-name">'+o+t+'</span><ul class="lcslt-group-opts">'}i.get(t).forEach((s,c)=>{let r=i.get(t).get(c),o=r.img?'<i class="lcslt-img" style="background-image: url(\''+r.img+"')\"></i>":r.imgClass?'<i class="'+r.imgClass+'"></i>':"",p=r.selected?"lcslt-selected":"",u=r.disabled||-1!==a.indexOf(e)?"lcslt-disabled":"";!(!n&&l.querySelector('option[value="'+c+'"]').hasAttribute("data-lcslt-placeh"))&&(d+='<li class="lcslt-dd-opt '+p+" "+u+" "+(p?"lcslt-dd-opt-hlight":"")+'" data-val="'+c+'"><span>'+o+r.name+"</span></li>")}),c||(d+="</ul></li>")}),document.body.insertAdjacentHTML("beforeend",d+"</ul></div>"),document.querySelectorAll(".lcslt-dd-opt").forEach(t=>{t.addEventListener("click",l=>{e.clicked_dd_option(l,t)}),t.addEventListener("mouseenter",e=>{document.querySelector(".lcslt-dd-opt-hlight")&&document.querySelector(".lcslt-dd-opt-hlight").classList.remove("lcslt-dd-opt-hlight"),t.classList.contains("lcslt-disabled")||t.classList.add("lcslt-dd-opt-hlight")}),t.addEventListener("mouseleave",e=>{t.classList.remove("lcslt-dd-opt-hlight")})}),p&&(window.innerWidth>1024&&o.autofocus_search&&setTimeout(()=>document.querySelector("input[name=lcslt-search]").focus(),50),document.querySelector("input[name=lcslt-search]").addEventListener("keyup",e=>{this.debounce("opts_search",500,"search_options")})),document.querySelector(".lc-select-dd-scroll").addEventListener("mouseenter",()=>{t=[window.pageXOffset,window.pageYOffset]}),document.querySelector(".lc-select-dd-scroll").addEventListener("mouseleave",()=>{t=!1})},this.on_val_change=function(e){let t=e.nextSibling,l=Array.from(t.selectedOptions).map(e=>e.value),s=new Event("change",{bubbles:!0});t.dispatchEvent(s),"function"==typeof o.on_change&&o.on_change.call(this,l,t)},this.deselect_option=function(e,t,l){t.nextSibling.querySelector('option[value="'+l.getAttribute("data-val")+'"]').selected=!1,this.set_sel_content(t),this.on_val_change(t)},this.clicked_dd_option=function(e,t){let l=s.classList.contains("lcslt-multiple"),i=t.getAttribute("data-val"),c=s.nextSibling;if(t.classList.contains("lcslt-disabled")||!l&&t.classList.contains("lcslt-selected")||!t.classList.contains("lcslt-selected")&&s.classList.contains("lcslt-max-opts"))return!1;l||(document.querySelectorAll(".lcslt-dd-opt").forEach(e=>{e.getAttribute("data-val")!=i&&e.classList.remove("lcslt-selected")}),c.querySelectorAll("option").forEach(e=>{e.getAttribute("value")!=i&&(e.selected=!1)})),t.classList.toggle("lcslt-selected"),t.classList.remove("lcslt-dd-opt-hlight"),c.querySelector('option[value="'+i+'"]').selected=!c.querySelector('option[value="'+i+'"]').selected,this.set_sel_content(),this.on_val_change(s),l?this.set_dd_position():s.click()},this.search_options=function(){if(!document.querySelector("input[name=lcslt-search]"))return!1;let e=document.querySelector("input[name=lcslt-search]").value.trim(),t=document.querySelectorAll(".lcslt-group-name"),l=document.querySelectorAll(".lcslt-dd-opt"),s=document.querySelector(".lcslt-no-results");if(e.length<2)document.getElementById("lc-select-dd").classList.remove("lcslt-is-searching"),t.forEach(e=>{e.style.removeProperty("display")}),l.forEach(e=>{e.style.removeProperty("display")}),s&&s.remove();else{document.getElementById("lc-select-dd").classList.add("lcslt-is-searching"),t.forEach(e=>{e.style.display="none"});let i=e.split(" "),c=!0;l.forEach(e=>{let t=!1;i.some(l=>{-1!==e.querySelector("span").innerHTML.toLowerCase().indexOf(l.toLowerCase())&&(t=!0,c=!1)}),t?e.style.removeProperty("display"):e.style.display="none"}),c?s||document.querySelector(".lc-select-dd-scroll").insertAdjacentHTML("beforeend",'<li class="lcslt-no-results"><span>'+o.labels[3]+"</span></li>"):s&&s.remove()}},this.debounce=function(t,l,s,i){void 0!==e[t]&&e[t]&&clearTimeout(e[t]);let c=this;e[t]=setTimeout(()=>{c[s].call(c,i)},l)},this.generate_style=function(){document.head.insertAdjacentHTML("beforeend",`<style>.lcslt,.lcslt-multi-selected{position:relative;align-items:center}#lc-select-dd,.lcslt{overflow:hidden;font-size:1rem}.lcslt-wrap{position:relative;display:inline-block}.lcslt-wrap select{display:none!important}.lcslt{display:flex;flex-direction:row;flex-wrap:wrap;width:100%;min-height:15px;padding:5px 30px 5px 5px}.lcslt-dd-opt:not(.lcslt-disabled):not(.lcslt-selected),.lcslt-multiple-dd .lcslt-dd-opt:not(.lcslt-disabled),.lcslt:not(.lcslt-disabled) .lcslt-multi-selected,.lcslt:not(.lcslt-disabled):not(.lcslt-max-opts){cursor:pointer}.lcslt:not(.lcslt-multiple):after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid #444;display:inline-block;position:absolute;right:6px;transition:transform .3s}.lcslt.lcslt_dd-open:after{transform:rotate(180deg)}.lcslt:not(.lcslt-multiple)>span{line-height:normal}.lcslt span,.lcslt-multi-selected{max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.lcslt-multiple{padding:5px 5px 0;height:auto;line-height:0}.lcslt span:not(.lcslt-placeholder):not(.lcslt-multi-callout){line-height:1.1em;font-size:.95em}.lcslt-opt{display:inline-block;margin:0 0 5px 5px}.lcslt-multi-selected{display:flex;line-height:normal}.lcslt-multi-selected:before{content:"\xd7";font-family:arial}.lcslt-multi-callout{display:inline-block;line-height:0}.lcslt-placeholder{line-height:normal;padding-bottom:5px}.lcslt-tabindex-trick{position:fixed;top:-99999px}#lc-select-dd,#lc-select-dd *,.lcslt-wrap,.lcslt-wrap *{box-sizing:border-box}#lc-select-dd{visibility:hidden;position:absolute;top:-9999px;z-index:999;border-top:none;font-family:sans-serif}#lc-select-dd.lcslt-shown{visibility:visible;z-index:99999999}#lc-select-dd ul{margin:0;padding:0;list-style:none}.lc-select-dd-scroll{max-height:200px;overflow:auto}.lcslt-search-li{padding:0!important;margin:0!important;position:relative}.lcslt-search-li input{width:100%;padding-right:36px;line-height:normal}.lcslt-search-li input[type=text]{border:none;outline:0;-webkit-appearance:none;-webkit-border-radius:0}.lcslt-search-li input[type=text],.lcslt-search-li input[type=text]:active,.lcslt-search-li input[type=text]:focus,.lcslt-search-li input[type=text]:focus-visible,.lcslt-search-li input[type=text]:hover{border:none;outline:0}.lcslt-search-li:before{content:"";position:absolute;z-index:10;width:25px;height:50%;right:8px;top:50%;-webkit-mask:{};mask-size:contain;transform:translate3d(0,-53%,0)}#lc-select-dd li{width:100%;margin:0}#lc-select-dd li>div{display:flex;align-items:center}#lc-select-dd li span{word-break:break-all;display:inline-block;line-height:normal}.lcslt-img{background-position:center center;background-repeat:no-repeat;background-size:contain;background-color:transparent;vertical-align:top;line-height:0;font-size:0}</style>`)},this.init()):console.error("You must provide a valid selector or DOM object as first argument")};let a=e=>{if("string"!=typeof e){if(e instanceof Element)return[e];{let t=[];for(let l of e)l instanceof Element&&t.push(l);return t}}return(e.match(/(#[0-9][^\s:,]*)/g)||[]).forEach(function(t){e=e.replace(t,'[id="'+t.replace("#","")+'"]')}),document.querySelectorAll(e)},n=(e,t)=>{let l=e;for(;null!=l.parentNode&&!l.matches(t);)l=l.parentNode;return l}}();